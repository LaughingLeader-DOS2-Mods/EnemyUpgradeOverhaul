Version 1
SubGoalCombiner SGC_AND
INITSECTION
KBSECTION
PROC
LLENEMY_Upgrades_OnRollingDone((CHARACTERGUID)_Character)
AND
NOT DB_LLENEMY_HardMode_Temp_BonusRolls(_Character, _, _)
AND
LeaderLib_Random_QRY(1,3)
AND
DB_LeaderLib_Random(_BonusRolls)
THEN
DB_LLENEMY_HardMode_Temp_BonusRolls(_Character, _BonusRolls, 0);

PROC
LLENEMY_Upgrades_OnRollingDone((CHARACTERGUID)_Character)
AND
DB_LLENEMY_HardMode_Temp_BonusRolls(_Character, _BonusRolls, _Current)
AND
_Current < _BonusRolls
AND
IntegerSum(_Current, 1, _Next)
THEN
NOT DB_LLENEMY_HardMode_Temp_BonusRolls(_Character, _BonusRolls, _Current);
DB_LLENEMY_HardMode_Temp_BonusRolls(_Character, _BonusRolls, _Next);
LLENEMY_Upgrades_RollForUpgrades(_Character);
LLENEMY_Upgrades_OnRollingDone(_Character);

/*
LeaderLib_Timers_StartObjectTimer(_Character, 50, "Timers_LLENEMY_HardMode_RollAgain", "LLENEMY_HardMode_RollAgain");

IF
StoryEvent((CHARACTERGUID)_Character, "LLENEMY_HardMode_RollAgain")
THEN
LLENEMY_Upgrades_RollForUpgrades(_Character);
LLENEMY_Upgrades_OnRollingDone(_Character);
*/

//Cleanup
IF
RegionEnded(_)
THEN
SysClear("DB_LLENEMY_HardMode_Temp_BonusRolls", 3);

EXITSECTION
SysClear("DB_LLENEMY_HardMode_Temp_BonusRolls", 3);
ENDEXITSECTION
ParentTargetEdge "LLENEMY_80_ToggledScripts"