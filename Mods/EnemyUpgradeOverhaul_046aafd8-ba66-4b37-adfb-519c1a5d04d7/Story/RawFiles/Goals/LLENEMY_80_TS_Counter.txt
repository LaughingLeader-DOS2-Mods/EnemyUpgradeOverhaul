Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
AttackedByObject((CHARACTERGUID)_Enemy, _, (CHARACTERGUID)_Attacker, _, _)
AND
HasActiveStatus(_Enemy, "LLENEMY_TALENT_COUNTER", 1)
THEN
CharacterCharacterSetEvent(_Enemy, _Attacker, "LLENEMY_Counter_OnAttacked");

IF
CharacterCharacterEvent(_Enemy, _Attacker, "LLENEMY_Counter_CanStarterCounter")
THEN
LeaderLib_Timers_StartCharacterCharacterTimer(_Enemy, _Attacker, 1000, "Timers_LLENEMY_Counter_RollForCounterAttack", "LLENEMY_Counter_RollForCounterAttack");

// [BEGIN_NO_OSITOOLS]
IF
CharacterCharacterEvent(_Enemy, _Attacker, "LLENEMY_Counter_RollForCounterAttack")
AND
CharacterIsDead(_Enemy, 0)
AND
CharacterIsDead(_Attacker, 0)
AND
LeaderLib_Roll_QRY(300, 999)
THEN
CharacterAttack(_Enemy, _Attacker);
CharacterStatusText(_Enemy, "LLENEMY_StatusText_CounterAttack");

// [END_NO_OSITOOLS]

/* [OSITOOLS_ONLY]
IF
CharacterCharacterEvent(_Enemy, _Attacker, "LLENEMY_Counter_RollForCounterAttack")
AND
CharacterIsDead(_Enemy, 0)
AND
CharacterIsDead(_Attacker, 0)
THEN
NRD_LuaCall("LLENEMY_Ext_RollForCounterAttack", (STRING)_Enemy, (STRING)_Attacker);
*/
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "LLENEMY_80_ToggledScripts"